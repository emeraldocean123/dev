# Router DHCP Configuration
**Device:** Unifi UCG Fiber Router (192.168.1.1)
**Last Retrieved:** October 10, 2025
**Method:** SSH - dnsmasq configuration dump

## DHCP Server Overview

**DHCP Service:** dnsmasq
**Interface:** br0 (LAN bridge)
**Network:** 192.168.1.0/24
**Domain:** lan

## DHCP Range

**Range:** 192.168.1.100 - 192.168.1.254
**Subnet Mask:** 255.255.255.0
**Lease Time:** 86400 seconds (24 hours)
**Max Leases:** 1,000,000

## DHCP Options

- **Router/Gateway:** 192.168.1.1
- **DNS Server:** 192.168.1.1
- **Broadcast Address:** 192.168.1.255
- **Domain:** lan

## PXE Boot Configuration

**TFTP Server:** 192.168.1.54 (iventoy - currently offline)
**Boot File:** iventoy_loader_16000

## Static DHCP Reservations (By MAC Address)

| IP | MAC Address | Device Description |
|----|-------------|--------------------|
| 192.168.1.2 | 84:78:48:72:ef:ab | unifi-usw-pro-xg-24-switch |
| 192.168.1.3 | 6c:63:f8:ec:fd:73 | unifi-usp-pdu-pro (offline) |
| 192.168.1.5 | c4:41:1e:fa:dd:d4 | linksys-mx4200-joe-router |
| 192.168.1.6 | c4:41:1e:fa:dd:cf | linksys-mx4200-kitchen-router |
| 192.168.1.7 | c4:41:1e:fa:dd:bb | linksys-mx4200-family-router |
| 192.168.1.8 | e8:9f:80:47:29:4f | linksys-mx4200-mark-router |
| 192.168.1.9 | e8:9f:80:47:2a:85 | linksys-mx4200-gazebo-router |
| 192.168.1.10 | 00:11:32:ff:4a:a5 | synology-1520-nas (offline) |
| 192.168.1.20 | 00:00:00:00:00:00 | Reserved (invalid MAC) |
| 192.168.1.30 | ec:71:db:07:42:84 | reolink-nvr |
| 192.168.1.31 | e0:bb:9e:2f:da:a2 | epson-et-3830-printer |
| 192.168.1.40 | a8:b4:e0:07:9b:cd | intel-1250p-proxmox-host |
| 192.168.1.100 | f8:bc:12:95:dd:10 | dell-inspiron-3847-desktop (Hamachi VPN client) |
| 192.168.1.101 | - | Reserved for Hamachi VPN client |

## DHCP Configuration Details

### dnsmasq Settings

```
# Network Interface
interface=br0
no-dhcp-interface=lo

# DHCP Range
dhcp-range=set:net_Default_br0_192-168-1-0-24,192.168.1.100,192.168.1.254,255.255.255.0,86400

# Domain
domain=lan,192.168.1.0/24

# DHCP Options
dhcp-option=tag:net_Default_br0_192-168-1-0-24,option:router,192.168.1.1
dhcp-option=tag:net_Default_br0_192-168-1-0-24,option:dns-server,192.168.1.1
dhcp-option=tag:net_Default_br0_192-168-1-0-24,28,192.168.1.255

# PXE Boot
dhcp-boot=tag:net_Default_br0_192-168-1-0-24,iventoy_loader_16000,,192.168.1.54
dhcp-option=tag:net_Default_br0_192-168-1-0-24,66,192.168.1.54

# General Settings
dhcp-authoritative
dhcp-leasefile=/data/udapi-config/dnsmasq.lease
dhcp-script=/tmp/dnsmasq-main.dhcp.script
script-on-renewal
dhcp-lease-max=1000000
quiet-ra
```

## Notes

- DHCP service is managed by dnsmasq on the router
- Configuration is auto-generated by ubios-udapi-server
- Static reservations ensure consistent IPs for infrastructure devices
- PXE boot server (iventoy) is configured but currently offline
- DHCP range starts at .100 to avoid conflicts with static/reserved IPs
- Lease time is 24 hours (86400 seconds)
- Router acts as both gateway and DNS server for the network
- **Hamachi VPN Static Port NAT**: 192.168.1.100 and 192.168.1.101 have static port NAT rules configured via iptables (replaces OPNsense functionality)

## Network Segments

**Static Range:** 192.168.1.1 - 192.168.1.99 (reserved for infrastructure)
**DHCP Pool:** 192.168.1.100 - 192.168.1.254 (dynamic allocation)

## Router WAN Configuration

**WAN Interface:** eth4
**WAN IP:** 73.93.188.131/23 (DHCP from ISP)
**WAN Gateway:** via Xfinity modem

## Additional Interfaces

- **br0:** 192.168.1.1/24 (LAN bridge)
- **wgsrv1:** 192.168.1:9.1/24 (WireGuard VPN server)
